{% extends "layout.html" %}

{% block content %}
<style>
        table.dataTable thead .sorting:after,
    table.dataTable thead .sorting:before,
    table.dataTable thead .sorting_asc:after,
    table.dataTable thead .sorting_asc:before,
    table.dataTable thead .sorting_asc_disabled:after,
    table.dataTable thead .sorting_asc_disabled:before,
    table.dataTable thead .sorting_desc:after,
    table.dataTable thead .sorting_desc:before,
    table.dataTable thead .sorting_desc_disabled:after,
    table.dataTable thead .sorting_desc_disabled:before {
    bottom: .5em;
    }
    </style>
     <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>


    <!--Data Table-->
    <script type="text/javascript"  src=" https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript"  src=" https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js" defer></script>
    <!--Export table buttons-->
    <script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.24/build/pdfmake.min.js" ></script>
    <script type="text/javascript"  src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.24/build/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.1/js/buttons.print.min.js"></script>


    <script>
        $(document).ready(function() {
            $('#dtBasicExample').DataTable();
            $('.dataTables_length').addClass('bs-select');
        });
    </script>
    <div class="content-section">
      <div class="media">
        <div class="media-body">
          <h2 class="account-heading">{{ current_user.username }}</h2>
          <p class="text-secondary">{{ current_user.email }}</p>
        </div>
      </div>
            <fieldset>
                <legend class="border-bottom mb-4">Your transaction history</legend>
                {%if not historySend%}
                <div></div>
                {%else%}
                <div class="container">
                    <h3>Transactions you initiated</h3>
                    <table  id="dtBasicExample" class="table table-striped  table-bordered table-sm " style="border-collapse: separate;" cellspacing="0" width="100%">
                        <thead>
                        <tr>
                            <th class="th-sm">SENDER</th>
                            <th class="th-sm">RECEIVER</th>
                            <th class="th-sm">AMOUNT</th>
                            <th class="th-sm">STATUS</th>
                        </tr>
                        </thead>
                        <tbody>
                            {% for h in historySend%}
                            <tr>
                                <td>
                                    {{ h.sender_id }}
                                </td>
                                <td>
                                    {{ h.receiver_id }}
                                </td>
                                <td>
                                    {{ h.amount }}
                                    {% if h.currency == 'money' %}
                                        $
                                    {% else %}
                                        {{ h.currency }}
                                    {% endif %}
                                </td>
                                <td>
                                    {{ h.status }}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>
                </div>
                {%endif%}
                {%if not historySend%}
                <div></div>
                {%else%}
                <div>
                    <h3>Transactions you received</h3>
                    <table style="border-collapse: separate;">
                        <tr>
                            <th>SENDER</th>
                            <th>RECEIVER</th>
                            <th>AMOUNT</th>
                            <th>STATUS<th>

                            {% for h in historyRecv%}
                            <tr>
                                <td>
                                    {{ h.sender_id }}
                                </td>
                                <td>
                                    {{ h.receiver_id }}
                                </td>
                                <td>
                                    {{ h.amount }}
                                    {% if h.currency == 'money' %}
                                        $
                                    {% else %}
                                    {{ h.currency }}
                                    {% endif %}
                                </td>
                                <td>
                                    {{ h.status }}
                                </td>
                            </tr>
                            {% endfor %}
                        </tr>
                    </table>
                </div>
                {%endif%}
            </fieldset>
    </div>

    <div class="border-top pt-3">
        <small class="text-muted">
            Crypto Exchange 2023Â®
        </small>
    </div>
{% endblock content %}